package main

import "log"

func main() {
 	arr := []string {"....#..#.......#........#....#.","..##.#.#.#...................#.","....#.#.##..#....#......#......",".........#.#......##.....#.....","..........#.###.##...##........","#....#.#.......##.....#..#.....","#...........#.#...#..#..##.##..","......##.............#.....#...","..##..........###..#.#..##.....","...........#........#......##..","..##...........##..............","..#......###.#.....#.#.#.......","..#..#..#..........#.#....#....",".#.....##......................","...#...##..#...#.........#..##.",".#......#..#..#...#......#.##..","..##.##.......#..#.....#..#...#","..............#..#..#...#......","...#...#....##.....#...#...#...","......................#...#....",".......#......#...#..##...#.#..","##......#..#.....#....#.....#..","....#.#.##.#.#....#............","#.....##.............#.........","..........#...........#.#.....#","...#...##....#.#........#..#...","................#..#.##.##....#","......#...#...##...##....#.....","##....#..#..#...#..#...........","#..................#...#.#..#..","....##....##.#....#..#......#..",".....#...........#.........##..","..#..............#.........#..#","......##....................#..","..#.....###...####...#...#.##..","#..#.#......#.....#.......#.#..","##.#.........######........#...","..#....###...#.#..............#",".....#..............#.........#","....#......#..#.........#...#..",".....###.....#.###.......###...","#.#..#.....#....##...#........#","..##....#..#.........#...#.#...","..#..##.............#....#.#.#.","..##.#..#.#.#.........##.......","#.#..#.........#..............#","#..#.........###.......#.#..#.#",".............#...#....#......#.","..........#.#...##.###.....#.#.","..#.....#......................",".......#......###.#.......#....","....#....#.........#...###.#.#.",".#.............#............#..","....#..#.............#.#....#..","....#.....#...#...##.#.........","..#...#...#..................#.","........#....#.....#...........",".....##.......#...#.#..#..#....","...#............#..#.#.........","......................#........","....#......#.....#.#....#......",".....#..#.........#.........##.","...............#.....#....##...","...#.#.#...#..#...........#....",".#....###......##...#.#.#.#....",".....#...#....####....##.......","..#......#..#.....##.#...#.....","...#.##..#....#..##.....#......","..#......#...#...##.....#...#..","......#.....#........#.........","..#.#....#..............##....#","..#...#......##............#...",".##.#.......#.......#......#..#","...##.##...#.....#.......#..#..","......##..#....#.......#.......",".....#..#..#.#.....#.....#...##","##.#...#.#.#.....#...#.#.#.##.#","...................###...#..#..",".#.....##.#......#........#....",".##...##.#..........#...#....#.","......#..............#.#......#","...#.......#..#...........#....",".###...#............##..#...##.","##..#.#.........#............#.","#...#.#......#.##...........#.#",".#.#...#........#......##......","....#...#...#.....#...#....#...","...##...........##.........#...",".........#...#..###............","..#........#...............#...",".............#....#.#..........","........#......#.#.......#....#",".................#....##.#.##..","..#...##........#..............","#..#........#...#....#.........","......#.#.....#.....#..###.#..#","....#............#...#.#.#.....","............#..........#...#...","..........#....##.#.........#..","..............#...#...#..#.....","#......#....#..##....#......##.","...#....#.................#....",".#.##.............#...#....##..","....#..#.........#..#....#....#","..#.....##..#......#.#..#......","..#..#.....#........#...#..#..#",".........##.#.##.#.......#....#","..#.......##.##...#.....#.....#",".............##...#...........#","..#......#..#....#...#..#.##...","....#........#......#.........#",".......#........#..#.#.#..##..#","..#......#...........##...#....",".....#..#.#...#..............##",".#..#......#......#........#..#","...##...............#....#.....",".......#...#.......##..#.......",".....#....#...#...#..#.....#.#.","...#.........#.....#...........","...#.....###....#....#...#...#.","#..#.....#.........#.........#.",".................#.#.....#....#","...........#..........#..#.....","........#.#....#...#..#.....###","#............................#.","..##..#..#...##.........#......","......##....#.#...#.........#..","......#..##.#......#..#.....#..","...#.......##....#.#....#......",".....#........#...#............","#.......#...#.........#......#.","......#......#....#..#.........","..#.#........#..#......#....#..",".#..#.#..........##....###.#..#","...#....#.##..#...#....#.......","..#.....#......#.###.......#...","..............................#",".....#..#...#...........#......",".##...#....##....#.#.#.#....#.#",".#...#....#...#........#.......","....#............#...##..#.....","....##..#....#....#.....#....##",".............#..##.#.#.#.......","#.......#.#.#.......#..#..#....","#..#...........#.......###..#..",".#..##.#.....#........#........","..#.#.......#............#..#..","...........#..#............##.#",".....#.......#.....#..#.##.#..#","......#......##.....##.........","..##.#..#.#..#..#..............",".....#.............##...#.#.##.",".#......##.#..........#........","..#..#.........#.....#.#.#.....","..#.....#.......#.....#..#.....","#.#.#........#.#...#....#..#...",".#.#.......#............#....#.","......#..................#....#",".#...#...#.....#.#..........#..",".#..##....####...........#.#...","..##.....#...#.#....#....#.....","#.....................#....#.#.","###..###.#.#...........#.....##","......#......#..........#......","...#......#.##.....#......###.#",".............#..#.#...........#","..#.............#.#..#.....#...","...#...............#....##...##","........#.................#....","#..###.....#.......##.#......##","....#.#..............#.........","#..........#.....#..##...#.....","................#...#..#....#..","..#...#....##..........#.#.....","......#........##......#..#...#","...#....#..#.....#.......#...#.",".#.....#..#...#..###....#......","....#.........#....#.#.#.....#.","#.#....#...#....#.....#..##....",".......#..#..#..........#...#..","..#.#..#.....##.#.#............","..#....#.....#..##..#..#.#..#..","..#.##.#...........#...#..#....",".........#........#...#........","..#.#.#.......##.........#.##..","#.#..........#.#...#..#......##",".#..#....................#.#...",".##......#................#...#","..##.#######......#....#.......","....#...##.#....#.#............",".##....#...##.......#...#..#...","...........#...#...#...#..#....","#...#.....#.......#....#.....#.",".............#.................","........#.#.......#...#.#.#....","..............#............#.#.","......#......##..#.......#....#","##...#..................#......",".....#......###.....#.......#.#",".....#.#............#.#........","..#.#..#............#....#.#...","##.#.###.#.#.#..#......#.......","...##........#..#.....#.#.#..#.","##......#.##.....####..#.......","............#...#..#...#..#....","...#..#................##.#..#.",".#....#.#...........##.#.#...#.","####..#...........#.......###..",".......#.................#.....",".......#....#.......##....#....","..#.........#...#....#.........","..........#..#...#.#...##..#...","....##..........#.........##...","#.........##..#.#..#.......#...",".#...........#....#...#...#.#..","....#..#.....#...##....#.#....#",".#....#.....#......#..##.##.#.#","#......#..#.......##...........","...#..#...#.#.................#","......#.......##....##.#......#","....#....#.#.#.....#....#....#.","..#..........#.##...##..#......","...#..#........#....#.#..#....#","##.......#........#..........#.",".#........#.......#...#..##...#","..#..#..##..#...........#...###","..#......#..........#..##......",".#.....#..#.#...#...#.........#","#.#......##....................","#...#.....##...........#.......","........#...#....#.......##....","...#.##...#....#....#..#..#..#.","...#..#......##....#..#..##....","#...#..........#.#.............","##..#........##.....#.........#",".....#......#.#...###..#.......","#..##.#..#.###...........##..#.",".....#....#..........#.......#.","##.........##.#................","....#.........#............##..",".......#........#......#..#..##",".#...#...##..#....#..#.........",".............#...#.#........#..","......#..#...#..#.###..#.......","........##.#..#.#..#..#........","#.##..#..#..........#...##..###",".##...#............#.#...##..#.","................#....##.#...#..","#.................#..........#.","...#..#..#.....................","..#...##.#.#...................",".....#...#.......#............#","..#..#.........#..##.#..#.#...#",".....#.#.....#.#.......#.....#.","..................#..#....#.#..","..#.....###.##.......##....#.#.","..#......##.......#....##.#....","....#...................#..##.#",".......#....#.##.#.......#....#","..#...#......#..#...###....#.#.","..#..#.#....#...........#.....#",".....#..#..#.......#........#..","......#.##.#......#...........#","#...#....#.#..##.##..#..##.....","#...##....#.#...##........#....","..##............#.#.#..........","....#.....#.#..#.......#..#....","#..#.#.....#..#..##...#..##....","...##........#...........#...#.",".####......#..##.........#.#...",".......#.......................",".................#....#..#.....",".........##......###...........",".##......#.#.#....#.#...#..###.","....#......##.###.#.#..#.......","..........#.......##......##..#","...........#.......#..##.......",".....###..#..............##....","........##..#.#.#......#....#..","#....#.........................","...........#...............##..","......#.................#......",".....#...#..##...##...#...#....","..........#.#...##.####......#.","..#.#.....##....#...........#..","..........#....#..#....##...#..",".#.......#..##...#...#.....#...","...##....#.#......##...##....#.","#.......#.......#.##.#...#.#...","#...#..................#......#","..#.......#...............#..##","#.....#..................#....#",".##.....#.....#......####.....#","..#........#...#.#........#...#","..##.....#....#...#...........#","..#..#.....##..#.##...#........","..........###..#....##.....#...","...#...#....#.##.#...#.#.......","..##......#.......#.......##...","............#............#.....",".##....#.........#.............","....#....#....#........##...#.#",".......##......................","..........#.#.................#","......##.#...#.........#.....#.","..#...#......#..#.............#","..........###.#..#.#...#..#..#.","#..#.#..#....##...#...#.#...#..",".#........##...#......#.##.....","...###.#...##..............##..","#.#.#...#...#..#....#.#..#.....",".#.#.##..#....#......#.#.......","...#..#.#....##...........#..#.",".....##..##......#.#...........","......#.....#....####....#.....",".#.#.#...#..#..#...........#...",".....#......................#..",".........#.........#.###.##....",".....#......##..........#......","..#...........##...........#...","..............#.........#.....#","..#....#..#...#...##.#.........",".#.#.#....#..........#........."}
	//arr := []string {"..##.......","#...#...#..",".#....#..#.","..#.#...#.#",".#...##..#.","..#.##.....",".#.#.#....#",".#........#","#.##...#...","#...##....#",".#..#...#.#"}

	debugLog := false

	partOneResult := countTree(debugLog,3, 1, arr)

	partTwoResultOne := countTree(debugLog, 1, 1, arr)
	partTwoResultTwo := countTree(debugLog,3, 1, arr)
	partTwoResultThree := countTree(debugLog, 5, 1, arr)
	partTwoResultFour := countTree(debugLog, 7, 1, arr)
	partTwoResultFive := countTree(debugLog, 1, 2, arr)

	log.Printf("Part one result %v", partOneResult)
	log.Printf("Part two result %v [%v, %v, %v, %v, %v]", partTwoResultOne*partTwoResultTwo*partTwoResultThree*partTwoResultFour*partTwoResultFive, partTwoResultOne, partTwoResultTwo, partTwoResultThree, partTwoResultFour, partTwoResultFive)
}

func countTree(printLog bool, right, down int, arr []string) int {
	trees := 0

	row := 0
	rightPos := 0
	if printLog {
		log.Print(arr[0])
	}
	for {
		row += down
		if row >= len(arr) {
			break
		}

		rightPos += right

		rowElement := arr[row]
		adjustedRight := rightPos % len(rowElement)

		if string(rowElement[adjustedRight]) == "#" {
			trees++

			if printLog {
				log.Print(replaceAtIndex2(rowElement, 'X', adjustedRight), adjustedRight, string(rowElement[adjustedRight]) == "#")
			}
		} else {
			if printLog {
				log.Print(replaceAtIndex2(rowElement, 'O', adjustedRight), adjustedRight, string(rowElement[adjustedRight]) == "#")
			}
		}
	}

	return trees
}

func replaceAtIndex2(str string, replacement rune, index int) string {
	return str[:index] + string(replacement) + str[index+1:]
}